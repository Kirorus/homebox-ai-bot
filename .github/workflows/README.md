# GitHub Actions Workflows

–≠—Ç–æ—Ç –∫–∞—Ç–∞–ª–æ–≥ —Å–æ–¥–µ—Ä–∂–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –¥–ª—è CI/CD.

## üöÄ Workflows

### 1. docker-build.yml
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ Docker –æ–±—Ä–∞–∑–∞ –≤ Docker Hub.

**–¢—Ä–∏–≥–≥–µ—Ä—ã:**
- Push –≤ –≤–µ—Ç–∫–∏: `main`, `master`, `develop`
- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–≥–æ–≤: `v*` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `v1.0.0`)
- Pull requests –≤ `main`/`master`

**–î–µ–π—Å—Ç–≤–∏—è:**
- –°–±–æ—Ä–∫–∞ multi-arch –æ–±—Ä–∞–∑–∞ (linux/amd64, linux/arm64)
- –ó–∞–≥—Ä—É–∑–∫–∞ –≤ Docker Hub —Å —Ç–µ–≥–∞–º–∏:
  - `latest` (–¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–π –≤–µ—Ç–∫–∏)
  - `branch-name` (–¥–ª—è –≤–µ—Ç–æ–∫)
  - `v1.0.0` (–¥–ª—è —Ç–µ–≥–æ–≤)
- –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å Trivy
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–æ–µ–≤ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Å–±–æ—Ä–∫–∏

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. Docker Hub —Å–µ–∫—Ä–µ—Ç—ã

–î–æ–±–∞–≤—å—Ç–µ –≤ GitHub Secrets:
- `DOCKERHUB_USERNAME` - –≤–∞—à –ª–æ–≥–∏–Ω Docker Hub
- `DOCKERHUB_TOKEN` - —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞ Docker Hub

### 2. –°–æ–∑–¥–∞–Ω–∏–µ Docker Hub —Ç–æ–∫–µ–Ω–∞

1. –í–æ–π–¥–∏—Ç–µ –≤ Docker Hub
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Account Settings ‚Üí Security
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Access Token
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –≤ GitHub Secrets

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞:
- `contents: read` - —á—Ç–µ–Ω–∏–µ –∫–æ–¥–∞
- `packages: write` - –∑–∞–≥—Ä—É–∑–∫–∞ –æ–±—Ä–∞–∑–æ–≤

## üì¶ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑–∞

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω:

```bash
# –ü–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è
docker pull your-username/homebox-ai-bot:latest

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –≤–µ—Ç–∫–∞
docker pull your-username/homebox-ai-bot:develop

# –í–µ—Ä—Å–∏—è –ø–æ —Ç–µ–≥—É
docker pull your-username/homebox-ai-bot:v1.0.0
```

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ —Å–±–æ—Ä–∫–∏

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Actions –≤–∫–ª–∞–¥–∫—É GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –í—ã–±–µ—Ä–∏—Ç–µ workflow "Build and Push Docker Image"
3. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –¥–µ—Ç–∞–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –õ–æ–≥–∏ —Å–±–æ—Ä–∫–∏

–í –ª–æ–≥–∞—Ö –≤—ã –Ω–∞–π–¥–µ—Ç–µ:
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–±–æ—Ä–∫–µ
- –†–∞–∑–º–µ—Ä—ã –æ–±—Ä–∞–∑–æ–≤
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

GitHub –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–≤–µ–¥–æ–º–∏—Ç –æ:
- –£—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–µ
- –û—à–∏–±–∫–∞—Ö —Å–±–æ—Ä–∫–∏
- –†–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## üõ†Ô∏è Troubleshooting

### –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ Docker Hub

```
Error: Cannot perform an interactive login from a non TTY device
```

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å `DOCKERHUB_USERNAME` –∏ `DOCKERHUB_TOKEN`

### –û—à–∏–±–∫–∞ —Å–±–æ—Ä–∫–∏

```
Error: failed to solve: failed to compute cache key
```

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å Dockerfile –∏ .dockerignore

### –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏

```
Error: denied: requested access to the resource is denied
```

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Docker Hub —Ç–æ–∫–µ–Ω –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ workflow

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ workflow:

1. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª
2. –°–¥–µ–ª–∞–π—Ç–µ commit –∏ push
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ Actions
4. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—Ç–∫–∞—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

## üìä –ú–µ—Ç—Ä–∏–∫–∏

–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ:
- –í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏
- –†–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏–π
- –£—è–∑–≤–∏–º–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## üéØ Best Practices

1. **–¢–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
2. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** –í–∫–ª—é—á–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã Trivy
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –°–ª–µ–¥–∏—Ç–µ –∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ GitHub
